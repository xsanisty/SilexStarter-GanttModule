{% set template = config.get('@silexstarter-dashboard.config.template') %}
{% extends '@silexstarter-dashboard/'~ template ~'/index.twig' %}

{% block stylesheet %}
    {{ stylesheet('@silexstarter-dashboard/admin-lte/plugins/select2/select2.min.css') }}
    {{ parent() }}
    {{ stylesheet('@xsanisty-gantt/css/dhtmlxgantt.css') }}

    <style>
        html, body{ height:100%; padding:0px; margin:0px;}
        .gantt_task_line.gantt_dependent_task {
            background-color: #65c16f;
            border: 1px solid #3c9445;

        }
        .gantt_task_line.gantt_dependent_task .gantt_task_progress {
            background-color: #46ad51;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">{{ chart.name }}</h3>
                    <div class="box-tools pull-right">
                        <div class="btn-group">
                            <button data-toggle="dropdown" class="btn btn-box-tool dropdown-toggle" type="button">
                                <i class="fa fa-cog"></i>
                            </button>
                            <ul role="menu" class="dropdown-menu">
                                <li><a href="#" id="btn-refresh"><i class="fa fa-fw fa-refresh"></i>Refresh Chart</a></li>
                                <li class="divider"></li>
                                <li><a href="#" id="btn-invite"><i class="fa fa-fw fa-user"></i>Invite User</a></li>
                                <li><a href="#" id="btn-edit"><i class="fa fa-fw fa-edit"></i>Edit Chart</a></li>
                                <li><a href="#" id="btn-bookmark"><i class="fa fa-fw fa-bookmark"></i>Bookmark Chart</a></li>
                                <li class="divider"></li>
                                {% if public_url %}
                                    <li><a href="{{ public_url }}" target="_blank"><i class="fa fa-external-link"></i>Public Url</a></li>
                                {% endif %}
                                <li><a href="#" id="btn-export-pdf"><i class="fa fa-file-pdf-o"></i>Export To PDF</a></li>
                                <li><a href="#" id="btn-export-png"><i class="fa fa-image"></i>Export To PNG</a></li>
                            </ul>
                        </div>
                      </div>
                </div>
                <div class="box-body no-padding">
                    <div id="gantt-container" style="width:100%; height:480px;"></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block modal %}
    {{parent()}}
    {% include '@xsanisty-gantt/chart/modal.twig' %}
    {% include '@xsanisty-gantt/chart/invite.twig' %}
{% endblock %}

{% block javascript %}
    {{parent()}}

    {{ javascript([
        '@xsanisty-gantt/js/dhtmlxgantt.js',
        '@silexstarter-dashboard/admin-lte/plugins/select2/select2.min.js',
        'http://export.dhtmlx.com/gantt/api.js',
        '@xsanisty-gantt/js/ganttloader.js'
    ]) }}
{% endblock %}
